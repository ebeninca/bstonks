{% extends "base.jinja" %}

{% block styles %}
    {{ super() }}
    <style>
        .table-sm{
            font-size: 11px;
        }
    </style>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="
        https://cdn.jsdelivr.net/gh/xcash/bootstrap-autocomplete@v2.3.7/dist/latest/bootstrap-autocomplete.min.js">
    </script>
    <script>
        $('.basicAutoSelect').autoComplete({
            resolverSettings: {
                url: '{{ url_for("dre.search") }}'
            }
        });
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
{% endblock %}

{% block content %}
   {{ super() }}
    <div class="jumbotron">
        <h1>Demonstrativo de resultado do exerc√≠cio</h1>
        <form method="POST" action="{{ url_for('dre.data') }}">
            <select onchange="this.form.submit()" class="form-control basicAutoSelect" 
            name="tickerSelect" placeholder="Digite para buscar, ex: Ambev, Itau" autocomplete="off"></select>
        </form> 
    </div>
    {% if errorMsg %}
    <div class="alert alert-info" role="alert">{{ errorMsg }}</div>
    {% endif %}
    <div class="mx-3">
        <div class="table-responsive-sm">
            <table class="table table-sm table-striped">
                <thead class="table-dark">
                    <tr>
                        {% for col in colnames %}
                        <th scope="col" data-toggle="tooltip" data-placement="top" 
                            title="Testando tooltip Testando tooltip Testando tooltip Testando tooltip 
                            Testando tooltip Testando tooltip Testando tooltip Testando tooltip 
                            Testando tooltip Testando tooltip Testando tooltip Testando tooltip ">{{ col }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for stock in stocks %}
                    <tr>
                        {% for col in colnames %}
                            {% if "companyName" in col or "ticker" in col %}
                            <td class="text-left">{{ stock[col] }}</td>
                            {% else %}
                            <td class="text-right">{{ stock[col] }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>    
    </div>
{% endblock %}